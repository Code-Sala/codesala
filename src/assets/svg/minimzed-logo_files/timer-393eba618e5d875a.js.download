(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6885],{75227:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/timer",function(){return n(50875)}])},50875:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return _},default:function(){return D}});var i=n(52676),o=n(75271),s=n(62455),r=n(58963),l=n(41301),a=n(31817),c=n(88190),d=n(30290),u=n(64668),h=n(58470);let m=e=>{let t=Number(e.target.value);return t>99&&(t=99),t<0&&(t=0),"0".concat(t).slice(-2)};var f=e=>{let{ring:t,toggleRing:n,addTimerFromSeconds:o}=e,[s,c]=(0,a.useMediatedState)("00",m),[u,h]=(0,a.useMediatedState)("10",m),[f,j]=(0,a.useMediatedState)("00",m);return(0,i.jsx)(l.Box,{pl:"1.25rem",pr:".75rem",children:(0,i.jsxs)(l.Level,{spacing:"xs",height:"3.75rem",children:[(0,i.jsxs)(l.Div,{align:"baseline",children:[(0,i.jsx)(g,{value:s,onChange:c,plain:!0,width:"2rem"}),(0,i.jsx)(l.Text,{size:"xl",family:"mono",weight:"semibold",c:"gray",children:"h"})]}),(0,i.jsxs)(l.Div,{align:"baseline",children:[(0,i.jsx)(x,{value:u,onChange:h,plain:!0,width:"2rem"}),(0,i.jsx)(l.Text,{size:"xl",family:"mono",weight:"semibold",c:"gray",children:"m"})]}),(0,i.jsxs)(l.Div,{align:"baseline",children:[(0,i.jsx)(p,{value:f,onChange:j,plain:!0,width:"2rem"}),(0,i.jsx)(l.Text,{size:"xl",family:"mono",weight:"semibold",c:"gray",children:"s"})]}),(0,i.jsxs)(l.Level,{spacing:"s",alignRight:!0,children:[(0,i.jsx)(l.IconButton,{icon:t?r.Azy:r.n8J,onClick:n,color:"gray"}),(0,i.jsx)(l.Button,{onClick:()=>{o(Number(s)*d.HOUR+Number(u)*d.MINUTE+Number(f))},children:"Add timer"})]})]})})},g=(0,s.default)(l.Input).withConfig({componentId:"sc-3b01ffb4-0"})(['font-family:"Roboto Mono",Consolas,monospace;font-size:1.25rem;font-weight:500;line-height:1.5;text-align:center;']),x=(0,s.default)(l.Input).withConfig({componentId:"sc-3b01ffb4-1"})(['font-family:"Roboto Mono",Consolas,monospace;font-size:1.25rem;font-weight:500;line-height:1.5;text-align:center;']),p=(0,s.default)(l.Input).withConfig({componentId:"sc-3b01ffb4-2"})(['font-family:"Roboto Mono",Consolas,monospace;font-size:1.25rem;font-weight:500;line-height:1.5;text-align:center;']);let j=e=>"0".concat(Math.floor(Math.abs(e))).slice(-2),b=e=>{let t=j(e%60);return e>d.MINUTE&&(t="".concat(j(e/d.MINUTE%60),":").concat(t)),e>d.HOUR&&(t="".concat(j(e/d.HOUR),":").concat(t)),t},w=e=>{switch(e){case 1:return{size:[12],text:["h1"]};case 2:case 3:case 4:return{size:[12,6],text:["h1","h4","h3","h2","h1"]};default:return{size:[12,6,6,4],text:["h1","h4","h3","h3","h1"]}}};var v=()=>{let[e,t]=(0,a.useToggle)(!0),[n,s]=(0,o.useState)({}),{size:m,text:g}=(0,o.useMemo)(()=>w(Object.keys(n).length),[n]),[x,p]=(0,o.useState)(Date.now());(0,a.useEffectOnce)(()=>{let e=setInterval(()=>p(Date.now()),500);return()=>clearInterval(e)});let j=e=>s(t=>(delete t[e],{...t})),v=e=>s(t=>{let{end:n,pause:i}=t[e];if(void 0!==i){let o=x-i;t[e].pause=void 0,t[e].end=n+o}else t[e].pause=x;return{...t}}),I=(0,o.useMemo)(()=>Object.entries(n).map(e=>{let[t,n]=e,{start:i,end:o,pause:s}=n,r=s||x;return{id:t,expired:r>o,secondsLeft:Math.round(Math.abs(o-r)/d.MILLISECOND_PADDING),start:i,pause:s,end:o}}),[x,n]),y=e&&I.some(e=>e.expired&&!e.pause);return(0,o.useEffect)(()=>{if(!y)return;let e=new Audio("/assets/timer.mp3"),t=()=>e.play();return e.addEventListener("ended",t),e.play(),()=>e.removeEventListener("ended",t)},[y]),(0,i.jsxs)(h.Z,{title:!0,shareBox:!0,children:[(0,i.jsx)(f,{ring:e,toggleRing:t,addTimerFromSeconds:e=>{e<=0||s(t=>({...t,[(0,c.generateUniqueString)(8)]:{start:Date.now(),end:Date.now()+e*d.MILLISECOND_PADDING}}))}}),I.length?(0,i.jsx)(l.Div,{mt:"1.25rem",children:(0,i.jsx)(l.Columns,{break:"s",children:I.map(e=>(0,i.jsx)(l.Columns.Column,{size:m,children:(0,i.jsxs)(C,{direction:"column",p:"1.25rem",bg:e.expired?"red.lighter":void 0,children:[(0,i.jsxs)(l.Heading,{weight:"semibold",m:"auto",family:"mono",size:g,children:[e.expired&&"-",b(e.secondsLeft)]}),(0,i.jsxs)(l.Level,{justify:"center",children:[(0,i.jsx)(l.IconButton,{icon:r.XAH,onClick:()=>j(e.id)}),(0,i.jsx)(l.IconButton,{icon:e.pause?r.zc:r.XQY,onClick:()=>v(e.id)})]})]})},e.id))})}):(0,i.jsx)(u.Z,{})]})},C=(0,s.default)(l.Box).withConfig({componentId:"sc-6632ee9d-0"})(["aspect-ratio:16 / 9;"]),I=n(48517),y=n(33204);let M=I.S.timer,N=()=>(0,i.jsx)(v,{});N.getLayout=(0,y.Z)(M);var _=!0,D=N}},function(e){e.O(0,[228,5772,144,1620,4651,1669,3999,9281,2888,9774,179],function(){return e(e.s=75227)}),_N_E=e.O()}]);