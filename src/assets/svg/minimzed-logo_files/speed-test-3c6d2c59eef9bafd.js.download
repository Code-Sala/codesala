(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7344],{27113:function(e){"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{domains:()=>o}),e.exports=((e,i,o,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))a.call(e,l)||l===o||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);var o={yello:{port:3010,hostname:"yello.io"},cloudier:{port:3030,hostname:"cloudier.io"},flowy:{port:3040,hostname:"flowy.io"},lytica:{port:3060,hostname:"lytica.io"},eventful:{port:3070,hostname:"eventful.io"},codecanvas:{port:3080,hostname:"codecanvas.io"}}},88190:function(e,t,r){"use strict";var n=r(91620).Buffer,a=r(14224),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,c=(e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})},d={};c(d,{LZW:()=>S,encryptString:()=>ea,fetchData:()=>h,generateUniqueString:()=>p,generateValidationString:()=>k,getCurrentUnixTime:()=>_,getRealIpFromRequest:()=>Y,getUserSession:()=>K,getUserSessionProps:()=>q,getValidationParameters:()=>W,hasExpectedProperties:()=>z,obfuscateObject:()=>T,obfuscateString:()=>D,plural:()=>$,regex:()=>J,runMiddleware:()=>V,signOut:()=>m,time:()=>y}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of s(t))l.call(e,a)||a===r||i(e,a,{get:()=>t[a],enumerable:!(n=o(t,a))||n.enumerable});return e})(i({},"__esModule",{value:!0}),d);var u=r(27113),f={},h=async(e,t={})=>new Promise((r,n)=>{let a=new URL(e,"u">typeof document?document.location.origin:void 0),i=`${a.host}${a.pathname}`;t?.body instanceof Object&&(t?.method||(t.method="POST"),t.body=JSON.stringify(t.body),t.headers={"Content-Type":"application/json",...t.headers}),t?.method||(t.method="GET");let{abortDuplicateRequests:o,...s}=t;if(o&&!s.signal){f[i]?.abort();let e=new AbortController;s.signal=e.signal,f[i]=e}fetch(e,s).then(e=>r(e)).catch(e=>n(e)).finally(()=>s.signal&&delete f[i])}),m=async()=>{h("https://yello.io/api/sign-out",{credentials:"include",abortDuplicateRequests:!0}).then(async e=>{let t=await e.json();if(!t.success)throw Error(t.error||"An error occurred");await Promise.all(Object.values(u.domains).filter(e=>"yello.io"!==e.hostname).map(e=>`https://${e.hostname}`).map(async e=>h(`${e}/api/sign-out-external`,{credentials:"include"}).catch(()=>null))),window.location.href="/"})},p=e=>{let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t},y={};c(y,{DAY:()=>w,HOUR:()=>A,MILLISECOND_PADDING:()=>E,MINUTE:()=>x,MONTH:()=>v,SECOND:()=>g,WEEK:()=>b,YEAR:()=>j});var g=1,x=60,A=3600,w=86400,b=604800,v=2592e3,j=31536e3,E=1e3,_=e=>Math.round(new Date().getTime()/1e3)+(e||0),T={};c(T,{deobfuscate:()=>P,obfuscate:()=>F});var S={};c(S,{decode:()=>N,encode:()=>L});var C=String.fromCodePoint(65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,45,95,33,35,37,40,41,42,43,44,46,47,58,59,61,63,64,91,93,94,123,124,125,126,32,36,96,1,2,3,4,5,6,7,8,9,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,247,38,39,62,0,10,13,34,60,92),L=(e,t=64)=>{if(!e)return e;let r=encodeURIComponent(e).split(""),n=Math.log2(t),a=t*t*t,i=new Map,o=[],s=256,l=e=>{let r=e.length>1?i.get(e):e.charCodeAt(0);for(let e=(Math.log2(s)/n|0)+1;e;e--)o.push(C[r%t]),r=r/t|0},c=r[0];for(let e=1;e<r.length;e++){let t=r[e];i.has(c+t)?c+=t:(i.set(c+t,s),l(c),c=t,++s==a-1&&(i.clear(),s=256))}return l(c),o.join("")},N=(e,t=64)=>{let r=Math.log2(t),n=t*t*t,a=new Map,i={};for(let e=0;e<t;e++)i[C.charAt(e)]=e;let o=257,s=0,l=8/r|0,c=(r=0)=>i[e[s++]]+(r===l?0:t*c(r+1)),d=String.fromCharCode(c()),u=d,f=[d];for(;s<e.length;){l=Math.log2(o++)/r|0;let e=c();d=e<256?String.fromCharCode(e):a.has(e)?a.get(e):d+d.charAt(0),f.push(d),o===n-1&&(a.clear(),o=256),a.set(o-2,u+d.charAt(0)),u=d}return decodeURIComponent(f.join(""))},D={};c(D,{deobfuscate:()=>R,obfuscate:()=>M});var O=e=>e===e.toUpperCase()?e.toLowerCase():e.toUpperCase(),I=e=>null!=e,M=(e,t,r)=>e.split("").reverse().map((e,t)=>(t+1)%r?e:O(e)).flatMap((e,r)=>[e,(r+1)%t?"":p(1)]).reverse().join(""),R=(e,t,r)=>e.split("").reverse().map((e,r)=>(r+1)%(t+1)?e:void 0).filter(I).map((e,t)=>(t+1)%r?e:O(e)).reverse().join(""),F=(e,t=7,r=4)=>{let a=JSON.stringify(e);return M(n.from(L(a).split("").reverse().join("")).toString("base64"),t,r)},P=(e,t=7,r=4)=>{let a,i=R(e,t,r),o=N(n.from(i,"base64").toString().split("").reverse().join(""));try{a=JSON.parse(o)}catch{return null}return a},k=e=>{let t=p(8);return F({__key:t,[t]:_(),...e},7,3)},U=r(61591),B=e=>a.env[e],Y=e=>{let t=e.ip;return t||(t=e.headers["x-forwarded-for"]?.replace(/:\d+$/,"")),t||(t=e.socket.remoteAddress),t?.includes("::ffff:")&&(t=t.split(":").reverse()[0]),t},z=(e,t)=>!!e&&t.every(t=>e.hasOwnProperty(t)),W=(e,t)=>{let r=Y(e),n=e.headers["cf-ipcountry"],a=e.headers["user-agent"];if(!r||!a)return Promise.reject("Unable to validate request (AE2B)");let{__validation:i}=e.body||{};if(!t&&!i)return Promise.resolve({ip:r,country:n,userAgent:a});let o=P(i,7,3);if(!o)return Promise.reject("Unable to validate request (6MSM)");if(!z(o,["clientId","sessionId","signalsHash","__key"]))return Promise.reject("Unable to validate request (SES9)");let{clientId:s,signalsHash:l,__key:c}=o,d=!!o[c]&&Number(o[c]);if(!d)return Promise.reject("Unable to validate request (HZ71)");let u=_();return d<u-30||d>u?Promise.reject("Unable to validate request (I70A)"):Promise.resolve({ip:r,country:n,userAgent:a,clientId:s,signalsHash:l})},H="production"===B("NODE_ENV")?"http://ms-plum-app-1:3000":"http://localhost:3100",Z=async(e,t,r)=>new Promise(n=>{let a="string"==typeof e.headers.cookie?(0,U.parse)(e.headers.cookie):void 0;return a?.token?W(e,t).then(e=>r({token:a.token,...e})).then(e=>n(e.json())).catch(e=>n({success:!1,error:e})):n({success:!1,error:"You are not signed in"})}),G=(e,t)=>Z(e,t,e=>h(`${H}/me`,{body:e}));B("NODE_ENV");var K=async e=>{let t=await G(e);return t?.success?{signedIn:!0,user:t.user}:{signedIn:!1,error:t.error}},q=e=>async t=>{let r=await K(t.req),n=await e?.redirect?.(r.user,t);return n?{redirect:{destination:n,permanent:!1}}:(e?.updateContext&&(t=e.updateContext(r.user,t)),{props:{...r,data:e?.supplyData?await e.supplyData(r.user,t):null}})},V=async(e,t,r)=>new Promise((n,a)=>r(e,t,e=>e instanceof Error?a(e):n(e))),$=(e,t="s",r="")=>1===e?r:t,J={};c(J,{asn:()=>Q,domain:()=>X,email:()=>ee,hostname:()=>et,ip:()=>er,url:()=>en});var Q=/^(^AS)?[0-9]+$/,X=/([A-z]+)\.([A-z]{2,})/,ee=/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,et=/^[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/\\/=]*)/,er=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))/,en=/^https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ea={};c(ea,{decrypt:()=>eo,encrypt:()=>ei});var ei=async(e,t)=>{let r=new TextEncoder,n=crypto.getRandomValues(new Uint8Array(16)),a=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",r.encode(t),{name:"PBKDF2"},!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt"]),s=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r.encode(e))),l=new Uint8Array(n.length+a.length+s.length);return l.set(n),l.set(a,n.length),l.set(s,n.length+a.length),L(btoa(String.fromCharCode(...l)))},eo=async(e,t)=>{let r=Uint8Array.from(atob(N(e)),e=>e.charCodeAt(0)),n=r.slice(0,16),a=r.slice(16,28),i=r.slice(28),o=new TextEncoder,s=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveKey"]),l=await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["decrypt"]),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},l,i);return new TextDecoder().decode(c)}},70211:function(e){"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{asn:()=>o,domain:()=>s,email:()=>l,hostname:()=>c,ip:()=>d,url:()=>u}),e.exports=((e,i,o,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))a.call(e,l)||l===o||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);var o=/^(^AS)?[0-9]+$/,s=/([A-z]+)\.([A-z]{2,})/,l=/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=/^[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/\\/=]*)/,d=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))/,u=/^https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/},30290:function(e){"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{DAY:()=>c,HOUR:()=>l,MILLISECOND_PADDING:()=>h,MINUTE:()=>s,MONTH:()=>u,SECOND:()=>o,WEEK:()=>d,YEAR:()=>f}),e.exports=((e,i,o,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))a.call(e,l)||l===o||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);var o=1,s=60,l=3600,c=86400,d=604800,u=2592e3,f=31536e3,h=1e3},61591:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||a,i=0;i<e.length;){var o=e.indexOf("=",i);if(-1===o)break;var s=e.indexOf(";",i);if(-1===s)s=e.length;else if(s<o){i=e.lastIndexOf(";",o-1)+1;continue}var l=e.slice(i,o).trim();if(void 0===r[l]){var c=e.slice(o+1,s).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[l]=function(e,t){try{return t(e)}catch(t){return e}}(c,n)}i=s+1}return r},t.serialize=function(e,t,a){var o=a||{},s=o.encode||i;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var l=s(t);if(l&&!n.test(l))throw TypeError("argument val is invalid");var c=e+"="+l;if(null!=o.maxAge){var d=o.maxAge-0;if(isNaN(d)||!isFinite(d))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(d)}if(o.domain){if(!n.test(o.domain))throw TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){var u=o.expires;if("[object Date]"!==r.call(u)&&!(u instanceof Date)||isNaN(u.valueOf()))throw TypeError("option expires is invalid");c+="; Expires="+u.toUTCString()}if(o.httpOnly&&(c+="; HttpOnly"),o.secure&&(c+="; Secure"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function i(e){return encodeURIComponent(e)}},43751:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/speed-test",function(){return r(5396)}])},5396:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{__N_SSP:function(){return tN},default:function(){return tD}});var a,i,o,s,l,c,d,u,f,h,m,p,y,g,x,A,w,b,v=r(52676),j=r(75271),E=r(62455),_=r(41301),T=r(64668),S=r(58470),C=r(89709),L=r(67874),N=r(58963),D=r(31817),O=r(30290),I=r(14224);(a=h||(h={})).MEAN="MEAN",a.MEDIAN="MEDIAN";let M={PING_INTERVAL:100,LATENCY_MEASUREMENT_DURATION:8,DOWNLOAD_DURATION:20,UPLOAD_DURATION:20,NUM_LATENCY_STREAMS:6,BANDWIDTH_NUM_STREAMS:12,NUM_STREAMS:{CF_SPEEDTEST:6,CF_WORKERS:6,FLYIO:0},CHROME_ANDROID:{PING_INTERVAL_UNLOADED:30,SKIP_EVERY:8},RESOURCE_TIMING_BUFFER_SIZE:4e3,STATIC_RESOURCES_PATH:I.env.PUBLIC_URL,TEST_ID_QUERY:"test-id",IGNORE_N_LATENCIES:3,DOWNLOAD_SAMPLE_WINDOW_SIZE:100,DOWNLOAD_REFRESH_RATE_EVERY_N_SAMPLES:50,IGNORE_FIRST_N_SECONDS:4,MINIMUM_AVERAGE_WINDOW:3,LATENCY_SOURCE_SELECTION_NUM_SAMPLES:8,CLOUDFLARE_LATENCY_NUM_SAMPLES:10,CLOUDFLARE_BAD_LATENCY_THRESHOLD:1,WORKER_URL:"https://bufferbloat-staging.waveform.workers.dev",BUFFERBLOAT_MEASUREMENT_METHOD:"MEAN",RESULTS_SCHEMA_VERSION:"1.0.8"},R=async e=>new Promise(t=>setTimeout(t,e)),F=e=>performance.getEntriesByName(e).slice(-1).pop(),P=async e=>{let t=Date.now(),r=await e(),n=Date.now()-t;return{start:t,duration:n,result:r,measurement:n}},k=e=>{let t=F(e);if(!t)return{ttfb:1/0};let r=t.responseStart-t.requestStart,n=t.responseEnd-t.responseStart;return{ttfb:r,performanceEntry:t,downloadTime:n}},U=async(e,t,r)=>P(async()=>{let n=Object.keys(Array.from({length:t})).map(t=>r(Number(t),e).then(e=>e.text()));await Promise.all(n)}),B=(e,t,r)=>300*t<e?(r=3*e/t,{target:2*e,updateTime:r}):{target:t*r,updateTime:r},Y=async(e,t)=>{let r=1e4/1.8,n=M.NUM_STREAMS.CF_SPEEDTEST,a=M.NUM_STREAMS.CF_SPEEDTEST+M.NUM_STREAMS.CF_WORKERS,i=25e6*a,o=15e6*M.NUM_STREAMS.CF_SPEEDTEST,{target:s,updateTime:l}=B(t,n,300),c=s/1.8;do{let d=s/c;if((r*=d)*n>i&&n===a)return{blockSize:25e6,numberOfStreams:n,updateTime:l};if(r*n>o){r*=n/a;let e=B(t,n=a,l);s=e.target,l=e.updateTime}if(d<1.8)return{blockSize:r,numberOfStreams:n,updateTime:l};let u=await U(r,n,e);c=(c=u.duration-t)>0?c:u.duration}while(c<s);return{blockSize:s/c*r,numberOfStreams:n,updateTime:l}};var z=r(93854),W=r(64784);let H=e=>e.reduce((e,t)=>e+t,0)/e.length||1,Z=e=>(0,z.ZP)([...e].sort(W.Z),.5),G=e=>0===e.length?(console.warn("Collected 0 latency values"),0):H(e.map(t=>Math.abs(t-H(e)))),K=e=>{let t=e[0],r=e[e.length-1],n=(0,z.ZP)(e,.25),a=(0,z.ZP)(e,.75),i=(0,z.ZP)(e,.95)||0,o=(0,z.ZP)(e,.5)||0,s=G(e);return{q1:n,q3:a,median:o,mean:H(e),mean95Th:H(e.filter(e=>e<i)),min:t,max:r,jitter:s,quantile95Th:i}},q=async(e,t)=>Promise.all(Array.from({length:t}).map(t=>new Promise(t=>e().then(t)))),V=async(e,t)=>(await q(e,t)).filter(Boolean).map(e=>e.measurement),$=async(e,t)=>H(await V(e,t)),J=async e=>{let{done:t}=await e.read();for(;!t;)t=(await e.read()).done};var Q=(e,t)=>{let r=M.NUM_STREAMS.CF_SPEEDTEST+M.NUM_STREAMS.CF_WORKERS+M.NUM_STREAMS.FLYIO,n=0,a=0,i=0,o=Array.from({length:r}).map(e=>new AbortController),s=()=>{o.forEach(e=>e.abort()),o=Array.from({length:r}).map(e=>new AbortController)},l=(e,r)=>{let[n,a,i]=t(e,r);return fetch(a,{method:n,body:i,cache:"no-store",signal:o[r].signal})},c=(e,t,r)=>{let o=n,s=a;if(a++,n=(o*s+e)/(s+1),a<10)return;let l=r*t;r>300&&(l*=.6666666666666666),i*=Math.min(3,l/n),i=Math.min(i,25e6),a=0,n=0};return{start:async()=>{let t=await $(()=>P(()=>l(0,0)),4),{blockSize:r,numberOfStreams:n,updateTime:a}=await Y((e,t)=>l(t,e),t);i=r,s();let o=[];for(let r=0;r<n;r++){let s=new Promise(async o=>{let s=i;for(;;)try{let{start:i,duration:o}=await P(async()=>{let{body:e}=await l(s,r);if(!e)throw Error("response body can not be undefined");await J(e.getReader())});e(i,s),o>t&&c(o-t,n,a)}catch(e){e instanceof DOMException||console.error(e),o();break}});o.push(s),await R(a)}await Promise.all(o)},cancel:s}},X=r(88190);let ee="https://speed.cloudflare.com",et=e=>"https://ping-cf-".concat(e,".waveform.com"),er=e=>"https://waveform-sjc-speed-".concat(e,".fly.dev");(i=m||(m={})).CLOUDFLARES_SPEEDTEST="cloudflares_speedtest",i.CLOUDFLARE_WORKERS="cloudflare_workers",i.FLYIO="flyio";let en=0,ea=()=>"app=s8AqVGsRxzo1aF2C&id=".concat((0,X.generateUniqueString)(8),"&index=").concat(en++),ei={cloudflares_speedtest:(e,t)=>"".concat(ee,"/__down?bytes=").concat(t,"&").concat(ea()),cloudflare_workers:(e,t)=>"".concat(et(e),"/down?bytes=").concat(t,"&").concat(ea()),flyio:(e,t)=>"".concat(er(e),"/down?bytes=").concat(t)},eo={cloudflares_speedtest:e=>"".concat(ee,"/__up"),cloudflare_workers:e=>"".concat(et(e),"/up"),flyio:e=>"".concat(er(e),"/up")},es=e=>{let{CF_SPEEDTEST:t,CF_WORKERS:r,FLYIO:n}=M.NUM_STREAMS;return e<t?{index:e,source:"cloudflares_speedtest"}:(e-=t)<r?{index:e,source:"cloudflare_workers"}:{index:e-=r,source:"cloudflares_speedtest"}},el=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,{index:r,source:n}=es(t);return ei[n](r,e)},ec=e=>{let{index:t,source:r}=es(e);return eo[r](t)},ed=e=>"https://waveform-speedtest-".concat(e,".global.ssl.fastly.net"),eu=e=>"https://ping-cf-".concat(e,".waveform.com/down?bytes=0"),ef=e=>"https://speedtest-c".concat(e,".waveform.com/down?bytes=0"),eh=()=>(0,ei.cloudflares_speedtest)(0,0);var em=e=>Q(e,(e,t)=>["GET",el(e,t)]);let ep="undefined"==typeof navigator?{isMobile:!1,isChrome:!1,isSafari:!1,isIos:!1,isApple:!1,isAndroid:!1}:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari:/apple/i.test(navigator.vendor),isIos:/iPhone|iPad|iPod/i.test(navigator.userAgent),isApple:/apple|iPhone|iPad|iPod/i.test(navigator.userAgent),isAndroid:/(android)/i.test(navigator.userAgent)},ey=async(e,t)=>P(async()=>{let r=await fetch(e,{headers:t});return await r.text(),r}),eg=async(e,t)=>{let r=await ey(e,t),n=eA(r.result);return n?{...r,serverTiming:n,measurement:r.duration-n}:null},ex=async(e,t)=>{let{start:r,result:n,duration:a}=await ey(e,t),i=k(e);return{...i,start:r,duration:a,result:n,measurement:i.ttfb}},eA=e=>{let t=e.headers.get("server-timing");if(!t)return null;let r=t.match(/dur=([0-9.]+)/);if(!r)throw Error("matches can not be undefined");return parseFloat(r[1])},ew=async(e,t)=>{let{start:r,ttfb:n,result:a,performanceEntry:i,duration:o}=await ex(e,t),s=eA(a);if(!s)return null;let l=n-s;return{start:r,ttfb:n,result:a,performanceEntry:i,serverTiming:s,rtt:l,duration:o,measurement:l}},eb={"Cache-Control":"no-cache"},ev=async()=>{let e=0;for(;e<3;){e+=1;let t=Array.from({length:M.NUM_LATENCY_STREAMS}).fill(0).map((e,t)=>ej(t));try{if((await Promise.all(t).then(e=>e.map(e=>{if(!e)throw Error("diff can not be undefined");return e.result.headers.get("CF-Cache-Status")})).then(e=>e.filter(e=>"DYNAMIC"!==e))).length>0)return!0}catch(e){console.error("error getting cloudflare latencies",e);break}}return!1},ej=e=>eg(ef(e),eb),eE=e=>ew(ef(e),eb),e_={"Cache-Control":"no-cache"},eT=async e=>{let t=0;for(;t<4;){t+=1;let{result:r}=await eL(e);if("HIT"===r.headers.get("X-Cache"))return!0}throw Error("Couldn't get a cache hit after ".concat(4," retries."))},eS=()=>{let e=[];for(let t=0;t<M.NUM_LATENCY_STREAMS;t++)e.push(eT(t));return Promise.all(e)},eC=e=>ey(ed(e),e_),eL=async e=>{let t=ed(e);return{...await ex(t,e_),url:t}};(o=p||(p={})).FASTLY_DIFF="fastly_diff",o.FASTLY_TTFB="fastly_ttfb",o.CLOUDFLARE_DIFF="cloudflare_diff",o.CLOUDFLARE_RTT="cloudflare_rtt",o.CFLARE_WORKER_DIFF="cflare_worker_diff",o.CFLARE_WORKER_RTT="cflare_worker_rtt",o.CFLARE_CACHING_FLY_DIFF="cflare_caching_fastly_diff",o.CFLARE_CACHING_FLY_RTT="cflare_caching_fastly_rtt";let eN={fastly_diff:eC,fastly_ttfb:eL,cloudflare_diff:()=>eg(eh()),cloudflare_rtt:()=>ew(eh()),cflare_worker_diff:e=>eg(eu(e)),cflare_worker_rtt:e=>ew(eu(e)),cflare_caching_fastly_diff:ej,cflare_caching_fastly_rtt:eE},eD=async e=>{let t=0,r=[];for(;t<2;){t++;let n=await Promise.all(Array.from({length:M.NUM_LATENCY_STREAMS}).map((t,r)=>e(r)));r.push(...n.map(e=>{if(!e)throw Error("value can not be undefined");return e.measurement}))}return r},eO=async e=>{let t=await eD(e?eE:ej),r=await eD(e?eL:eC),n=H(t)<H(r);return e?n?"cflare_caching_fastly_rtt":"fastly_ttfb":n?"cflare_caching_fastly_diff":"fastly_diff"},eI=async()=>{if(n)return n;await eS(),await ev();let e=!(ep.isIos||ep.isSafari),t=await eO(e);return n=t,t},eM=e=>(ep.isChrome||(e+=Math.random()-.5,e=e>0?e:0),e);var eR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.PING_INTERVAL,r=!1;return{start:async()=>{let n=eN[await eI()],a=[],i=0;for(;!r;){i%=M.NUM_LATENCY_STREAMS-1;let o=n(i+=1).then(t=>{if(r||!t)return;let{start:n,measurement:a}=t;e([eM(a),n])});a.push(o),await R(t)}await Promise.all(a)},cancel:()=>{r=!0}}},eF=()=>{let e,t=!1,r=()=>{t||(t=!0,null==e||e())},n=[],a=()=>{let e=n.at(0),t=n.at(-1);if(!t||!e)throw Error("current and last can not be undefined");let a=(t.total-e.total)/(t.time-e.time)*8e3;return r(),a},i=!1,o=!1,s=()=>(i||(i=!0,setTimeout(()=>o=!0,M.IGNORE_FIRST_N_SECONDS*O.MILLISECOND_PADDING)),!o),l=0;return{process:(e,t)=>(l+=t,n.push({time:e,total:l}),s())?{chunkSize:t}:{chunkSize:t,bandwidth:a()},onWarm:t=>{e=t}}},eP=(e,t,r)=>{let n=eR(e),a=eF(),i=em((e,r)=>{t(a.process(e,r))});return a.onWarm(()=>{n.start();let e=M.DOWNLOAD_DURATION*O.MILLISECOND_PADDING;null==r||r(e),setTimeout(i.cancel,e)}),{start:async()=>{await i.start(),n.cancel()},cancel:()=>{i.cancel(),n.cancel()}}},ek=(e,t)=>{let r=0,n=ep.isAndroid?t=>{r>=M.CHROME_ANDROID.SKIP_EVERY&&(e(t),r=0),r++}:t=>e(t),a=ep.isAndroid?M.CHROME_ANDROID.PING_INTERVAL_UNLOADED:M.PING_INTERVAL,i=!1,o=eR(e=>{if(!i){i=!0;let e=M.LATENCY_MEASUREMENT_DURATION*O.MILLISECOND_PADDING;null==t||t(e),setTimeout(o.cancel,e)}n(e)},a);return o},eU=e=>{let t={};return Q(e,(e,r)=>(t[e]||(t[e]=new Blob(["0".repeat(e)])),["POST",ec(r),t[e]]))},eB=(e,t,r)=>{let n=eR(e),a=eF(),i=eU((e,r)=>{t(a.process(e,r))});return a.onWarm(()=>{n.start();let e=M.UPLOAD_DURATION*O.MILLISECOND_PADDING;null==r||r(e),setTimeout(i.cancel,e)}),{start:async()=>{await i.start(),n.cancel()},cancel:()=>{i.cancel(),n.cancel()}}};(s=y||(y={}))[s.SMALLER_THAN=0]="SMALLER_THAN",s[s.LARGER_THAN=1]="LARGER_THAN",(l=g||(g={}))[l.DOWNLINK=0]="DOWNLINK",l[l.UPLINK=1]="UPLINK",l[l.LATENCY=2]="LATENCY",l[l.LATENCY_95TH=3]="LATENCY_95TH",l[l.JITTER=4]="JITTER";var eY=[{name:"Web browsing",criteria:{0:[1,2e6],1:[1,1e5],2:[0,500]}},{name:"Audio calls",criteria:{0:[1,1e5],1:[1,1e5],3:[0,400]}},{name:"4K video streaming",criteria:{0:[1,25e6]}},{name:"Video conferencing",criteria:{0:[1,1e7],1:[1,5e6],3:[0,400]}},{name:"Low latency gaming",criteria:{0:[1,1e7],1:[1,3e6],3:[0,40]}}];let ez=[{until:5,score:6},{until:30,score:5},{until:60,score:4},{until:200,score:3},{until:400,score:2},{until:1/0,score:1}];var eW=e=>{let t=e.map(e=>Z(e)||0),r=Math.max(t[1]-t[0],t[2]-t[0]);for(let e of ez)if(r<e.until)return e.score;return 1};let eH=e=>{let t=e.map(e=>[...e].sort(W.Z)).map(e=>K(e)),r=t.map(e=>e.median||0),n=t.map(e=>e.mean),a=t.map(e=>e.mean95Th),i=r[0],o=t.map(e=>e.quantile95Th),s=o[0],l=t.map(e=>e.jitter);return{medians:r,means:n,means95Th:a,latencyUnloaded:i,maxLatency:Math.max(...r),latency95Th:o,latency95ThUnloaded:s,maxLatency95Th:Math.max(...o),jitterUnloaded:l[0],maxJitter:Math.max(...l)}},eZ=e=>({passed:e.passed,failedWithBufferbloat:Object.keys(e.whereItFailed).map(t=>e.whereItFailed[t]).filter(e=>e===x.FAILED_NORMALLY).length<=0});(c=x||(x={}))[c.FAILED_NORMALLY=0]="FAILED_NORMALLY",c[c.FAILED_WITH_BUFFERBLOAT=1]="FAILED_WITH_BUFFERBLOAT",(d=A||(A={}))[d.PASS=0]="PASS",d[d.FAIL=1]="FAIL";let eG=(e,t)=>e[0]===y.LARGER_THAN&&t<e[1]||e[0]===y.SMALLER_THAN&&t>e[1],eK=(e,t,r)=>{let n=eH(e),{latencyUnloaded:a,maxLatency:i,latency95ThUnloaded:o,maxLatency95Th:s,jitterUnloaded:l,maxJitter:c}=n,d={},u=(e,t)=>{for(let r of Object.keys(t)){let n=e.criteria[r];if(!n)continue;let a=t[r];if(void 0===a)throw Error('criteria "'.concat(r,'" does not exist'));if(eG(n,a))return r.toString()}};eY.forEach(e=>{let n={},f=!0;[{[g.DOWNLINK]:t,[g.UPLINK]:r,failStatus:0},{[g.LATENCY]:a,[g.LATENCY_95TH]:o,[g.JITTER]:l,failStatus:0},{[g.LATENCY]:i,[g.LATENCY_95TH]:s,[g.JITTER]:c,failStatus:1}].forEach(t=>{let r=u(e,t);if(r){if(f=!1,Object.keys(n).includes(r)&&0===n[r])return;n[r]=t.failStatus}}),d[e.name]={whereItFailed:n,passed:f}});let f={};return Object.keys(d).forEach(e=>{let{passed:t,failedWithBufferbloat:r}=eZ(d[e]);f[e]=t?{normally:0,withBufferbloat:0}:r?{normally:0,withBufferbloat:1}:{normally:1,withBufferbloat:1}}),{impact:d,statistics:n,bufferbloatImpact:f}};var eq=e=>{let{latency:t,downloadLatency:r,uploadLatency:n}=e,a=[t,r,n].map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e[0])}),i=Z(e.downloadBandwidth||[])||0,o=Z(e.uploadBandwidth||[])||0,s=eW(a),{impact:l,statistics:c,bufferbloatImpact:d}=eK(a,i,o);return{bufferbloatScore:s,impact:l,statistics:c,bufferbloatImpact:d}};(u=w||(w={}))[u.LATENCY=0]="LATENCY",u[u.UPLOAD=1]="UPLOAD",u[u.DOWNLOAD=2]="DOWNLOAD";var eV=()=>{let[e,t]=(0,j.useState)(!1),[r,n]=(0,j.useState)({}),a=e=>n(t=>{let r=Object.fromEntries(Object.entries(e).map(e=>{let[r,n]=e;return[r,[...(null==t?void 0:t[r])||[],...n]]}));return{...t,...r}}),[i,o]=(0,j.useState)(),[s,l]=(0,j.useState)(),c=(0,j.useRef)(),[d,u]=(0,j.useState)(!1),[f,h]=(0,j.useState)(!1),m=(0,j.useMemo)(()=>d&&!f&&r?eq(r):void 0,[d,f]),p=()=>{var e;o(void 0),t(!1),u(!1),h(!0),null===(e=c.current)||void 0===e||e.call(c)};return(0,D.useUnmount)(p),{run:async()=>{h(!1);let e=!1,r=async(t,r)=>{c.current=()=>{e=!0,t.cancel()},o(r),l(void 0),await t.start()};if(n({}),t(!0),u(!1),performance.clearResourceTimings(),!e)try{let e=ek(e=>a({latency:[e]}),e=>l(e));await r(e,0)}catch(e){}if(!e)try{let e=eP(e=>a({downloadLatency:[e]}),e=>{let{chunkSize:t,bandwidth:r}=e;return a({downloadChunks:[t],...r?{downloadBandwidth:[r]}:void 0})},e=>l(e));await r(e,2)}catch(e){}if(!e)try{let e=eB(e=>a({uploadLatency:[e]}),e=>{let{chunkSize:t,bandwidth:r}=e;return a({uploadChunks:[t],...r?{uploadBandwidth:[r]}:void 0})},e=>l(e));await r(e,1)}catch(e){}o(void 0),t(!1),u(!0)},cancel:p,running:e,finished:d,cancelled:f,data:r,report:m,stage:i,stageDuration:s}};let e$=e=>{switch(e){case w.LATENCY:return"alternate";case w.UPLOAD:return"reverse";default:return"normal"}},eJ=(0,E.keyframes)(["from{top:-.5rem;}to{top:100%;}"]),eQ=E.default.div.withConfig({componentId:"sc-245e2c4c-0"})(["position:relative;display:flex;justify-content:center;background:",";width:.125rem;height:3rem;&:before{content:'';position:absolute;display:",";border-radius:0 50%;rotate:45deg;width:.5rem;height:.5rem;background:",";animation:"," 1.5s ease-in-out infinite ",";}"],e=>{let{theme:t}=e;return t.colors.primary.text},e=>{let{disabled:t}=e;return!!t&&"none"},e=>{let{theme:t}=e;return t.colors.primary.text},eJ,e=>{let{stage:t}=e;return e$(t)});var eX=e=>{let{stage:t,stageDuration:r,cancelled:n}=e;return(0,v.jsxs)(_.Div,{position:"relative",direction:"column",align:"center",justify:"center",children:[n&&(0,v.jsx)(_.Div,{display:"flex",position:"absolute",zIndex:1,children:(0,v.jsx)(e2,{icon:N.NBC,size:"l",color:"primary.text"})}),(0,v.jsx)(e0,{justify:"center",align:"center",width:"2rem",height:"2rem",bg:"ui.surface",zIndex:1,children:(0,v.jsx)(_.Icon,{icon:N.g4A,color:"primary.text"})}),(0,v.jsx)(eQ,{stage:t,disabled:!r||!!n}),(0,v.jsx)(e1,{justify:"center",align:"center",width:"2rem",height:"2rem",bg:"ui.surface",zIndex:1,children:(0,v.jsx)(_.Icon,{icon:N.V3X,color:"primary.text"})})]})},e0=(0,E.default)(_.Div).withConfig({componentId:"sc-245e2c4c-1"})(["border-radius:50%;border-bottom-right-radius:0;border:.125rem solid ",";rotate:45deg;> *{rotate:-45deg;}"],e=>{let{theme:t}=e;return t.colors.primary.text}),e1=(0,E.default)(_.Div).withConfig({componentId:"sc-245e2c4c-2"})(["border-radius:50%;border-top-left-radius:0;border:.125rem solid ",";rotate:45deg;> *{rotate:-45deg;}"],e=>{let{theme:t}=e;return t.colors.primary.text}),e2=(0,E.default)(_.Icon).withConfig({componentId:"sc-245e2c4c-3"})(["stroke:",";stroke-width:6rem;paint-order:stroke;"],e=>{let{theme:t}=e;return t.colors.ui.surface});let e5={6:"Your latency did not increase under load",5:"Your latency increased slightly under load",4:"Your latency increased moderately under load",3:"Your latency increased considerably under load",2:"Your latency increased a lot under load",1:"Your latency increased severely under load"},e4={6:L.CSz,5:L.nWV,4:L.J5q,3:L.jcK,2:L.gqh,1:L.kze};var e9=e=>{let{report:t,stage:r,stageDuration:n,run:a,cancel:i,cancelled:o}=e;return(0,v.jsxs)(_.Box,{marginless:!0,borderless:!0,dots:"primary.light",radius:"l",children:[(0,v.jsx)(_.Box.Content,{p:"2.5rem",justify:"center",c:"primary.darker",children:!o&&t?(0,v.jsx)(e3,{rounded:!0,justify:"center",align:"center",height:"7rem",width:"7rem",children:(0,v.jsx)(_.Icon,{icon:e4[t.bufferbloatScore],size:"2x",color:"primary.text",colorSecondary:"primary.lighter"})}):(0,v.jsx)(eX,{stage:r,stageDuration:n,cancelled:o})}),(0,v.jsx)(_.Box.Content,{p:"2.5rem",justify:"center",children:(0,v.jsx)(_.Box,{display:"inline-block",rounded:!0,p:".5rem",pl:"1.25rem",children:(0,v.jsxs)(_.Level,{children:[(0,v.jsx)(_.Text,{size:"s",weight:"medium",textAlign:"center",children:o?(0,v.jsx)(v.Fragment,{children:"Measurement cancelled"}):t?(0,v.jsx)(v.Fragment,{children:e5[t.bufferbloatScore]}):(0,v.jsx)(v.Fragment,{children:"Measuring your network speed"})}),(0,v.jsx)(_.Level,{alignRight:!0,children:o||t?(0,v.jsx)(_.IconButton,{icon:N.T80,color:"gray",fill:!0,rounded:!0,size:"s",onClick:a}):(0,v.jsx)(_.IconButton,{icon:N.NBC,color:"gray",fill:!0,rounded:!0,size:"s",onClick:i})})]})})})]})},e3=(0,E.default)(_.Box).withConfig({componentId:"sc-24163c4a-0"})(["box-shadow:inset 0 0 0 2px ",";"],e=>{let{theme:t}=e;return t.colors.primary.text});let e6={bad:e=>"Your internet connection may be too slow for reliable ".concat(e.toLowerCase(),"."),badWithBufferbloat:e=>"While your Internet connection may already be too slow for ".concat(e.toLowerCase(),", the bufferbloat issue might be making it even worse."),badOnlyBufferbloat:e=>"Your internet connection is fast enough to support ".concat(e.toLowerCase(),", but you may experience intermittent issues due to bufferbloat.")};var e8=e=>{let{report:t}=e;return t?(0,v.jsx)(e7,{boxShadow:"xs",children:(0,v.jsx)(_.Table,{hr:!0,wide:!0,children:(0,v.jsxs)(_.Table.Body,{children:[(0,v.jsxs)(_.Table.Row,{children:[(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Text,{size:"s",weight:"medium",children:"Your connection"})}),(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Text,{size:"s",textAlign:"center",children:"Under ideal conditions"})}),(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Text,{size:"s",textAlign:"center",children:"Due to bufferbloat"})})]}),Object.entries(t.impact).map(e=>{let[t,r]=e,{passed:n,failedWithBufferbloat:a}=eZ(r);return(0,v.jsxs)(_.Table.Row,{children:[(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Text,{size:"s",children:t})}),n?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.LEp,fw:!0,color:"green.darker"})})}),(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.LEp,fw:!0,color:"green.darker"})})})]}):a?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_.Table.Cell,{children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.LEp,fw:!0,color:"green.darker"})})}),(0,v.jsx)(_.Table.Cell,{title:e6.badOnlyBufferbloat(t),children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.NBC,fw:!0,color:"red.darker"})})})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_.Table.Cell,{title:e6.bad(t),children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.NBC,fw:!0,color:"red.darker"})})}),(0,v.jsx)(_.Table.Cell,{title:e6.badWithBufferbloat(t),children:(0,v.jsx)(_.Div,{justify:"center",children:(0,v.jsx)(_.Icon,{icon:N.NBC,fw:!0,color:"red.darker"})})})]})]},t)})]})})}):(0,v.jsx)(_.Box,{boxShadow:"xs",children:(0,v.jsx)(_.Box.Content,{c:"yellow.text",bg:"yellow.textInverted",children:(0,v.jsxs)(_.Level,{spacing:"s",justify:"center",children:[(0,v.jsx)(_.Icon,{icon:N.sqG}),(0,v.jsx)(_.Text,{size:"s",weight:"medium",children:"Waiting for tests to complete to generate buffer bloat report"})]})})})},e7=(0,E.default)(_.Box).withConfig({componentId:"sc-f789da7f-0"})(["background:transparent;"]),te=()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(tt,{boxShadow:"xs",children:[(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{weight:"medium",children:"Mitigating bufferbloat"})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"Bufferbloat is high latency (lag) that occurs when your network buffers are overfilled with data packets during heavy usage. This issue indicates that your network isn't maintaining optimal responsiveness under normal working conditions."})})]}),(0,v.jsxs)(tr,{boxShadow:"xs",children:[(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{weight:"medium",children:"Possible solutions"})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"- Enable SQM (Smart Queue Management) or AQM (Active Queue Management) settings if your router already has them."})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"- Enable QoS (Quality of Service)."})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsxs)(_.Text,{size:"s",children:["- Install ",(0,v.jsx)(_.Link,{underline:!0,href:"https://openwrt.org/",newTab:!0,children:"OpenWrt firmware"})," (version 22.03, 21.02, 19.07, or 18.06). The ",(0,v.jsx)(_.Link,{underline:!0,href:"https://openwrt.org/docs/guide-user/network/traffic-shaping/sqm",newTab:!0,children:"Smart Queue Management guide"})," tells how to configure the luci-app-sqm package. Or install suitable ",(0,v.jsx)(_.Link,{underline:!0,href:"https://dd-wrt.com/",newTab:!0,children:"DD-WRT"}),", ",(0,v.jsx)(_.Link,{underline:!0,href:"https://www.gargoyle-router.com/",newTab:!0,children:"Gargoyle"})," or ",(0,v.jsx)(_.Link,{underline:!0,href:"https://freshtomato.org/",newTab:!0,children:"Tomato"})," firmware, all of which support some kind of queue management based on FQ-CoDel and/or Cake."]})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"- Call your router vendor's support line if none of the above are possible. You have the information from the latency tests. Mention that the ping times get really high when someone is up/downloading files, and that it really hurts your network performance. Ask if they're working on the problem. Ask when they're going to release a firmware update that solves it."})}),(0,v.jsx)(_.Hr,{}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Link,{href:"https://www.bufferbloat.net/projects/bloat/wiki/What_can_I_do_about_Bufferbloat/",newTab:!0,children:(0,v.jsx)(_.Button,{as:"span",size:"s",color:"gray",children:"Read more about bufferbloat"})})})]})]}),tt=(0,E.default)(_.Box).withConfig({componentId:"sc-cad4419d-0"})(["background:transparent;"]),tr=(0,E.default)(_.Box).withConfig({componentId:"sc-cad4419d-1"})(["background:transparent;"]),tn=r(89791);let ta={jitter:"Jitter",min:"Min",max:"Max",mean:"Mean",median:"Median",q1:"25th percentile",q3:"75th percentile",quantile95Th:"95th percentile"};var ti=e=>{let{values:t}=e;return(0,v.jsx)(to,{boxShadow:"xs",children:(0,v.jsx)(_.Columns,{border:!0,children:Object.entries(ta).map(e=>{let[r,n]=e,a=(null==t?void 0:t[r])||0;return(0,v.jsx)(_.Columns.Column,{size:[12,4,null,3],children:(0,v.jsx)(tn.Z,{title:n,value:"".concat(a.toFixed(a>100?0:1)," ms")})},r)})})})},to=(0,E.default)(_.Box).withConfig({componentId:"sc-af13c151-0"})(["background:transparent;"]),ts=r(36515),tl=r(18670),tc=r(43968),td=r(22534),tu=r(79548);let tf=(0,E.keyframes)(["0%{width:0;}100%{width:100%;}"]),th=E.default.div.withConfig({componentId:"sc-f0256fb4-0"})(["position:relative;overflow:hidden;width:100%;height:3px;background:",";"],e=>{let{color:t,theme:r}=e;return r.colors[t].lighter}),tm=(0,E.default)(_.Div).withConfig({componentId:"sc-f0256fb4-1"})(["position:absolute;background:",";top:0;bottom:0;"],e=>{let{color:t,theme:r}=e;return r.colors[t].dark});var tp=(0,E.default)(tm).withConfig({componentId:"sc-f0256fb4-2"})(["animation:"," ","ms linear forwards;"],tf,e=>e.$_css),ty=e=>{let{duration:t,color:r="primary",...n}=e;return(0,v.jsx)(th,{color:r,children:!!t&&(0,v.jsx)(tp,{color:r,...n,$_css:t})})},tg=e=>e<1e6?{value:e/=1e3,postfix:"kbps"}:{value:e/=1e6,postfix:"mbps"};let tx=e=>{let{bandwidth:t,override:r}=e,n=(0,j.useMemo)(()=>r?tg(r):void 0,[r]);return(0,v.jsxs)(_.Div,{align:"baseline",children:[(0,v.jsx)(_.Text,{family:"mono",weight:"medium",children:Math.max((null!=n?n:t).value,0).toFixed(2)}),(0,v.jsx)(_.Text,{size:"s",ml:".25rem",children:(null!=n?n:t).postfix})]})};var tA=e=>{let{title:t,active:r,setActive:n,activeSecondary:a,setActiveSecondary:i,bandwidth:o,latency:s,chartData:l,loading:c,loadingDuration:d}=e,u=(0,E.useTheme)(),f=(0,j.useMemo)(()=>null==l?void 0:l.map(e=>({measurement:Array.isArray(e)?e[0]:e})),[l]),[h,m]=(0,j.useState)(),p=()=>m(void 0);return(0,v.jsx)(_.Columns.Column,{children:(0,v.jsxs)(_.Box,{position:"relative",overflow:"hidden",radius:"l",clickable:!0,children:[o?(0,v.jsxs)(_.Div,{display:"flex",children:[(0,v.jsx)(_.Box.Line,{wide:!0,dots:r?"primary.lighter":void 0,onClick:n,children:(0,v.jsxs)(_.Level,{justify:"space-between",children:[(0,v.jsx)(_.Text,{size:"s",children:t}),(0,v.jsx)(tx,{bandwidth:o,override:a?void 0:h})]})}),(0,v.jsxs)(_.Div,{display:["flex",null,null,"none","flex"],children:[(0,v.jsx)(_.Hr,{vr:!0,dashed:!0}),(0,v.jsx)(_.Box.Line,{dots:a?"primary.lighter":void 0,onClick:i,children:(0,v.jsxs)(_.Div,{align:"baseline",children:[(0,v.jsx)(_.Text,{family:"mono",weight:"medium",children:Math.max(a&&h||s,0).toFixed(2)}),(0,v.jsx)(_.Text,{size:"s",ml:".25rem",children:"ms"})]})})]})]}):(0,v.jsx)(_.Box.Line,{dots:r?"primary.lighter":void 0,onClick:n,children:(0,v.jsxs)(_.Level,{justify:"space-between",children:[(0,v.jsx)(_.Text,{size:"s",children:t}),(0,v.jsxs)(_.Div,{align:"baseline",children:[(0,v.jsx)(_.Text,{family:"mono",weight:"medium",children:Math.max(null!=h?h:s,0).toFixed(2)}),(0,v.jsx)(_.Text,{size:"s",ml:".25rem",children:"ms"})]})]})}),c&&(0,v.jsx)(_.Div,{position:"absolute",wide:!0,bottom:0,left:0,children:d?(0,v.jsx)(ty,{duration:d}):(0,v.jsx)(tu.Z,{})}),(0,v.jsx)(_.Hr,{dashed:!0}),(0,v.jsx)(_.Div,{display:"flex",onMouseLeave:p,children:(0,v.jsx)(_.Div,{wide:!0,height:"4rem",children:(0,v.jsx)(ts.h,{children:(0,v.jsxs)(tl.T,{data:f,margin:{top:20,right:20,bottom:20,left:20},onMouseMove:e=>{if(!(null==e?void 0:e.activePayload))return p();let[t]=e.activePayload;m(t.payload.measurement)},children:[(0,v.jsx)(tc.u,{content:()=>null,cursor:!1,isAnimationActive:!1,allowEscapeViewBox:{x:!0,y:!0}}),(0,v.jsx)(td.u,{type:"monotone",dataKey:"measurement",stroke:u.colors.primary.text,fillOpacity:0,strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})})]})})},tw=e=>e.map(e=>e[0]).sort(W.Z);(f=b||(b={}))[f.LATENCY=0]="LATENCY",f[f.DOWNLOAD=1]="DOWNLOAD",f[f.DOWNLOAD_LATENCY=2]="DOWNLOAD_LATENCY",f[f.UPLOAD=3]="UPLOAD",f[f.UPLOAD_LATENCY=4]="UPLOAD_LATENCY";let tb=e=>{if(e)return K(tw(e))};var tv=e=>{let{data:t,report:r,stage:n,stageDuration:a}=e,[i,o]=(0,j.useState)(0);(0,j.useEffect)(()=>{if(r)return o(void 0);switch(n){case w.LATENCY:return o(0);case w.DOWNLOAD:return o(1);case w.UPLOAD:return o(3)}},[n,r]);let s=e=>t=>{null==t||t.stopPropagation(),o(t=>e===t?void 0:e)},[l,c,d,u,f]=(0,j.useMemo)(()=>[tb(t.latency),tb(t.downloadLatency),tb(t.uploadLatency),tg(H(t.downloadBandwidth||[0])),tg(H(t.uploadBandwidth||[0]))],[t]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(tj,{size:4,break:"l",children:[(0,v.jsx)(tA,{title:"Latency",active:0===i,setActive:s(0),latency:(null==l?void 0:l.median)||0,chartData:t.latency,loading:n===w.LATENCY,loadingDuration:a}),(0,v.jsx)(tA,{title:"Download",active:1===i,setActive:s(1),activeSecondary:2===i,setActiveSecondary:s(2),bandwidth:u,latency:c&&l?c.median-l.median:0,chartData:2===i?t.downloadLatency:t.downloadBandwidth,loading:n===w.DOWNLOAD,loadingDuration:a}),(0,v.jsx)(tA,{title:"Upload",active:3===i,setActive:s(3),activeSecondary:4===i,setActiveSecondary:s(4),bandwidth:f,latency:d&&l?d.median-l.median:0,chartData:4===i?t.uploadLatency:t.uploadBandwidth,loading:n===w.UPLOAD,loadingDuration:a})]}),void 0===i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(e8,{report:r}),(0,v.jsx)(te,{})]}),0===i&&(0,v.jsx)(ti,{values:l}),[2,1].includes(i)&&(0,v.jsx)(ti,{values:c}),[4,3].includes(i)&&(0,v.jsx)(ti,{values:d})]})},tj=(0,E.default)(_.Columns).withConfig({componentId:"sc-c6098eee-0"})(["margin-top:1.25rem;"]),tE=()=>{let e=(0,C.Z)(),{run:t,cancel:r,running:n,finished:a,cancelled:i,data:o,report:s,stage:l,stageDuration:c}=eV();return(0,v.jsx)(S.Z,{title:!0,shareBox:!0,requiresInternetConnection:!0,children:n||a||i?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(e9,{report:s,stage:l,stageDuration:c,run:t,cancel:r,cancelled:i}),(0,v.jsx)(tv,{data:o,report:s,stage:l,stageDuration:c})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(t_,{boxShadow:"xs",radius:"l",children:[(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"A speed test evaluates your internet connection's download and upload speeds, along with ping (latency), giving you a snapshot of your connection's performance. This test helps you understand if your internet service provider (ISP) delivers the promised speeds, ensuring optimal performance for all your online activities."})}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Text,{size:"s",children:"By testing for buffer bloat, which measures the delay caused by overfilled network buffers during heavy usage, you can identify issues that lead to high latency and jitter, affecting real-time applications like video conferencing and gaming. Together, these tests provide insights into optimizing your internet for a smoother, more responsive online experience."})}),(0,v.jsx)(_.Hr,{}),(0,v.jsx)(_.Box.Content,{children:(0,v.jsx)(_.Button,{onClick:t,disabled:e,children:"Run speed test"})})]}),(0,v.jsx)(T.Z,{})]})})},t_=(0,E.default)(_.Box).withConfig({componentId:"sc-51f04f5c-0"})(["background:transparent;"]),tT=r(48517),tS=r(33204);let tC=tT.S["speed-test"],tL=()=>(0,v.jsx)(tE,{});tL.getLayout=(0,tS.Z)(tC);var tN=!0,tD=tL},79548:function(e,t,r){"use strict";var n=r(41301),a=r(62455);let i=(0,a.keyframes)(["0%{left:-100%;right:100%;}75%{left:100%;right:-100%;}100%{left:100%;right:-100%;}"]),o=(0,a.default)(n.Div).withConfig({componentId:"sc-a30ce7b4-0"})(["position:",";top:",";left:",";overflow:hidden;width:100%;height:3px;background:",';&:before{content:"";position:absolute;background:',";top:0;bottom:0;animation:"," 3s ease-in-out infinite;}"],e=>{let{float:t}=e;return t?"absolute":"relative"},e=>{let{float:t}=e;return!!t&&0},e=>{let{float:t}=e;return!!t&&0},e=>{let{color:t,theme:r}=e;return r.colors[t||"primary"].lighter},e=>{let{color:t,theme:r}=e;return r.colors[t||"primary"].dark},i);t.Z=o},89791:function(e,t,r){"use strict";var n=r(52676),a=r(41301),i=r(65190),o=r(70211),s=r(75271);t.Z=e=>{let{title:t,value:r,tag:l,valueLink:c,valueColor:d}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Box.Line,{children:(0,n.jsxs)(a.Level,{children:[(0,n.jsx)(a.Text,{size:"s",truncate:"ellipsis",c:"ui.subtext",children:t}),!!l&&(0,n.jsx)(a.Level,{alignRight:!0,children:(0,n.jsx)(a.Tag,{children:l})})]})}),(0,i.ensureArray)(r).map((e,t)=>(0,n.jsx)(s.Fragment,{children:s.isValidElement(e)?e:(0,n.jsx)(a.Box.Line,{title:"string"==typeof e?e:void 0,children:(0,n.jsx)(a.Text,{weight:"medium",family:"mono",truncate:"ellipsis",c:d,children:c&&"string"==typeof e&&e.match(o.url)?(0,n.jsx)(a.Link,{underline:!0,href:e,newTab:!0,children:e}):e})})},t))]})}}},function(e){e.O(0,[228,5772,144,3761,1620,4651,9368,288,558,3999,9281,2888,9774,179],function(){return e(e.s=43751)}),_N_E=e.O()}]);